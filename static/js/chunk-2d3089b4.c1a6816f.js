(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d3089b4"],{9101:function(e,t,i){"use strict";i.r(t);var r=function(){var e=this;e._self._c;return e._m(0)},a=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"rootDiv"},[t("div",{attrs:{id:"containerDiv"}},[t("div",{attrs:{id:"panoramic"}}),t("div",{attrs:{id:"bim"}})]),t("div",{attrs:{id:"exampl"}},[t("video",{attrs:{width:"600px",height:"300px",src:"screens/panoramicAndSceneSync.mp4",type:"video/mp4",controls:""}})]),t("pre",{staticClass:"line-numbers"},[t("code",{staticClass:"language-js"},[e._v("#代码示范\n            这个功能是一个展示全景图和三维模型视角匹配和联动的demo。左侧是全景图，右侧是bim模型，我们将bim模型的相机控制器orbit交给全景图的orbit，让两者视角保持一致并联动。\n        该功能可用于建筑当前状态和设计状态的一个比对，很有意思。\n            完成该功能，需要考虑的步骤如下：\n            1.首先加载全景图，然后确定全景图的默认视角，之后获取视角数据，视角数据可以通过工具栏上的相机状态获得。\n            2.确定全景图的中心位置对应在三维模型上的位置，然后修改全景图默认视角数据的position和target，接着设置三维模型的默认视角。\n            3.调整全景图和三维模型的两者默认视角匹配度，通常设置yaw角度就行了。\n            4.最后仿照syncOrbit函数代码提供的方式，同步两者的orbit即可。\n")])])])}],n={name:"Visible",data:function(){return{pitch:0,yaw:75}},methods:{createPanoramic:function(){var e=document.getElementById("panoramic"),t=new BIMI.BimViewer(e,{id:"panoramicViewer"});t.setScenePanoramic("datas/skybox/1235.jpg"),this.setPanoramicDefaultOrbit()},setPanoramicDefaultOrbit:function(){var e=BIMI.ViewerHelper.getViewer("panoramicViewer"),t={position:{x:-43,y:16.55,z:6.491},quaternion:{x:-.06635499364895026,y:.11403174830228421,z:.007633527392872102,w:.9912292895473359},target:{x:-43,y:16.55,z:6.491},zoom:1};e.setDefaultOrbitState(t),e.isDirty()},createBim:function(){var e=document.getElementById("bim"),t=new BIMI.BimViewer(e,{id:"bimViewer"});t.load("datas/半径项目Revit文件/bim.bin"),this.setBimDefaultOrbit()},setBimDefaultOrbit:function(){var e=BIMI.ViewerHelper.getViewer("panoramicViewer"),t=e.getOrbitState(),i=this.pitch,r=this.yaw,a=e.skewOrbitState(t,i,r),n=BIMI.ViewerHelper.getViewer("bimViewer");n.setDefaultOrbitState(a)},syncOrbit:function(){var e=BIMI.ViewerHelper.getViewer("panoramicViewer");e._orbitControl.addEventListener("change",(function(t){if(t.state==BIMI.ControlState.ROTATE||t.state==BIMI.ControlState.TOUCH_ROTATE){var i=e.getOrbitState(),r=0,a=75,n=e.skewOrbitState(i,r,a),o=BIMI.ViewerHelper.getViewer("bimViewer");o.setOrbitState(n)}}))}},mounted:function(){var e=this;this.$nextTick((function(){e.createPanoramic(),e.createBim(),e.syncOrbit(),Prism.highlightAll()}))},beforeDestroy:function(){var e=BIMI.ViewerHelper.getViewer("panoramicViewer");e.dispose();var t=BIMI.ViewerHelper.getViewer("bimViewer");t.dispose()}},o=n,s=(i("a023"),i("2877")),c=Object(s["a"])(o,r,a,!1,null,"b29e3240",null);t["default"]=c.exports},a023:function(e,t,i){"use strict";i("a5ee")},a5ee:function(e,t,i){}}]);